<section class="content">
  <div class="content-block">
    <div class="block-header">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="'Profile'" [items]="['Patients']" [active_item]="'Profile'"></app-breadcrumb>
    </div>
    <div class="row clearfix">
      <div class="col-lg-4 col-md-12">
        <!--Patient Image-->
        <div class="card">
          <div class="contact-grid profile-image">
            <img src="assets/images/user/usrbig4.jpg" alt="">
          </div>
        </div>
        <!--About Patient-->
        <div class="card">
          <div class="header">
            <h2>About Patient</h2>
          </div>
          <div class="tab-pane body active" id="about">
            <small class="text-muted">Email address: </small>
            <p>{{patient.email}}</p>
            <hr>
            <small class="text-muted">Phone: </small>
            <p>{{patient.phoneNumber}}</p>
            <hr>
            <small class="text-muted">Address: </small>
            <p>{{patient.address}}</p>
            <hr>
          </div>
        </div>
      </div>
      <div class="col-lg-8 col-md-12">
        <!--Patient Information Section-->
        <div class="card">
          <div class="header">
            <h2>Patient Information Section</h2>
          </div>
          <div class="body">
            <mat-tab-group dynamicHeight>
              <!--About-->
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon msr-2">face</mat-icon>
                  About {{patient.firstName}}
                </ng-template>
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="project_widget">
                    <div class="body">
                      <div class="row">
                        <div class="col-md-3 col-6 b-r">
                          <strong>Full Name</strong>
                          <br>
                          <p class="text-muted">{{patient.firstName}} {{patient.lastName}}</p>
                        </div>
                        <div class="col-md-3 col-6 b-r">
                          <strong>Mobile</strong>
                          <br>
                          <p class="text-muted">{{patient.phoneNumber}}</p>
                        </div>
                        <div class="col-md-3 col-6 b-r">
                          <strong>Email</strong>
                          <br>
                          <p class="text-muted">{{patient.email}}</p>
                        </div>
                        <div class="col-md-3 col-6">
                          <strong>Location</strong>
                          <br>
                          <p class="text-muted">{{patient.address}}</p>
                        </div>
                        <div class="col-md-3 col-6">
                          <strong>Gender</strong>
                          <br>
                          <p class="text-muted">{{patient.gender}}</p>
                        </div>
                        <div class="col-md-3 col-6">
                          <strong>Marital Status</strong>
                          <br>
                          <p class="text-muted">{{patient.maritalState}}</p>
                        </div>
                        <div class="col-md-3 col-6">
                          <strong>Birth Date</strong>
                          <br>
                          <p class="text-muted">{{patient.birthDate}}</p>
                        </div>
                        <div class="col-md-3 col-6">
                          <strong>Blood Group</strong>
                          <br>
                          <p class="text-muted">{{patient.bloodGroup}}</p>
                        </div>
                        <div class="col-md-3 col-6">
                          <strong>Blood Pressure</strong>
                          <br>
                          <p class="text-muted">{{patient.bloodPressure}}</p>
                        </div>
                        <div class="col-md-3 col-6">
                          <strong>Condition</strong>
                          <br>
                          <p class="text-muted">{{patient.condition}}</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-tab>
              <!--Settings-->
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon msr-2">settings</mat-icon>
                  Settings
                </ng-template>
                <div class="header">
                  <h2>
                    <strong>Account</strong> Settings
                  </h2>
                </div>
                <div class="body">
                  <div class="row">
                    <div class="col-lg-4 col-md-12">
                      <button mat-raised-button color="primary" (click)='goToEditPage()' >Edit Patient</button>
                    </div>
                    <div class="col-lg-4 col-md-12">
                      <button mat-raised-button color="warn" (click)="deletePatient()" >Delete Patient</button>
                    </div>
                  </div>
                </div>
              </mat-tab>
            </mat-tab-group>
          </div>
        </div>
        <!--Patient Appointments Section-->
        <div class="card">
          <div class="header">
            <h2>Patient Appointments Section</h2>
          </div>
          <div class="body">
            <mat-tab-group dynamicHeight>
              <!--All Appointments-->
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon msr-2">my_library_books</mat-icon>
                  All Appointments
                </ng-template>
                <div class="body">
                  <mat-accordion>
                    <mat-expansion-panel *ngFor="let appointment of this.patientAppointments">
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          <mat-icon class="example-tab-icon msr-2">date_range</mat-icon>
                          {{appointment.date}}
                        </mat-panel-title>
                        <mat-panel-description>
                          <mat-icon class="example-tab-icon msr-2">access_time</mat-icon>
                          {{appointment.time}}
                        </mat-panel-description>
                      </mat-expansion-panel-header>
                      <div class="row">
                        <div class="col-lg-12 col-md-12">
                          <p>{{appointment.details}}</p>
                        </div>
                        <div class="col-lg-9 col-md-12">
                          <mat-slide-toggle [checked]=appointment.attended (change)="changeAppointmentAttended($event, appointment)">Attended</mat-slide-toggle>
                        </div>
                        <div class="col-lg-3 col-md-12">
                          <button mat-raised-button color="warn" (click)="deleteAppointment(appointment)" >Delete</button>
                        </div>
                      </div>
                    </mat-expansion-panel>
                  </mat-accordion>
                </div>
              </mat-tab>
              <!--Add Appointment-->
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon msr-2">my_library_add</mat-icon>
                  Add Appointment
                </ng-template>
                <div class="body">
                  <form class="register-form m-4" [formGroup]="appointmentForm">
                    <div class="row clearfix">
                      <div class="col-lg-6 col-md-12">
                        <mat-form-field class="example-full-width">
                          <mat-label>Choose a date</mat-label>
                          <input matInput  [matDatepicker]="picker4" formControlName="date" required>
                          <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                          <mat-datepicker #picker4></mat-datepicker>
                          <mat-error *ngIf="this.appointmentForm.get('date')?.hasError('required')">
                            Date is required
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-lg-6 col-md-12">
                        <mat-form-field class="example-full-width mb-3">
                          <mat-label>Choose a time</mat-label>
                          <input matInput [owlDateTimeTrigger]="time1" [owlDateTime]="time1" formControlName="time">
                          <mat-icon matSuffix [owlDateTimeTrigger]="time1" class="date-icon" >schedule</mat-icon>
                          <owl-date-time [pickerType]="'timer'" #time1 [hour12Timer]="true"></owl-date-time>
                        </mat-form-field>
                      </div>
                      <div class="col-lg-12 col-md-12">
                        <mat-form-field class="example-full-width" appearance="fill">
                          <mat-label>Appointment Details</mat-label>
                          <textarea matInput formControlName="details"></textarea>
                        </mat-form-field>
                      </div>
                      <div class="col-lg-12 col-md-12">
                        <mat-slide-toggle  formControlName="attended" >Attended</mat-slide-toggle>
                      </div>
                      <div class="col-lg-12 col-md-12">
                        <button mat-raised-button color="primary" (click)="addAppointment()">Add Appointment</button>
                      </div>
                    </div>
                  </form>
                </div>
              </mat-tab>
            </mat-tab-group>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
